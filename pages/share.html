<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DefDrive - File Manager</title>
  <link rel="stylesheet" href="../assest/Stylesheets/file-sharing.css">
  <link rel="icon" type="image/png" href="../assest/Image/logo.png">
</head>
<body>

  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="nav-left">
      <h1>DefDrive</h1>
    </div>
    <div class="nav-right">
      <button class="logout-btn">Logout</button>
    </div>
  </nav>

  <!-- Sidebar -->
  <aside class="sidebar">
    <button class="add-file-btn" onclick="openUploadModal()">+ Add File</button>
  </aside>

  <!-- Main Content -->
  <main class="main-content">

    <!-- Search Bar -->
    <div class="search-container">
      <input type="text" id="searchBar" placeholder="Search indexed files...">
    </div>

    <!-- File List Table -->
    <section class="file-table">
      <table class="file-table">
        <thead>
          <tr>
            <th>File Name</th>
            <th>Size</th>
            <th>Actions</th>
            <th>Access</th>
          </tr>
        </thead>
        <tbody>
          <!-- Rows will be dynamically populated by JavaScript -->
        </tbody>
      </table>
    </section>

    <!-- Modal for Uploading a File -->
    <div class="modal" id="uploadModal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeUploadModal()">&times;</span>
        <h2>Upload a File</h2>
        <form id="uploadForm" enctype="multipart/form-data">
          <div class="form-row">
            <label for="fileInput" class="file-label">Select a File</label>
            <input type="file" id="fileInput" name="file" required hidden>
            <span id="fileName">No file chosen</span>
          </div>
          <p id="uploadMessage"></p>
          <button type="submit" class="upload-btn">Upload File</button>
        </form>
      </div>
    </div>

    <div id="createAccessModal" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeCreateAccessModal()">&times;</span>
        <h2 id="accessModalHeader">Create Access</h2> <!-- Dynamically updated header -->

        <!-- Hidden field for Access Name -->
        <input type="hidden" id="accessNameInput">

        <div class="flex-row">
          <label>Subnets:</label>
          <button id="addSubnetBtn" class="round-btn">+</button>
        </div>
        <div id="subnetContainer"></div>

        <div class="flex-row">
          <label>IPs:</label>
          <button id="addIpBtn" class="round-btn">+</button>
        </div>
        <div id="ipContainer"></div>

        <div class="expiry-field">
          <label>Expires in:</label>
          <input type="number" id="accessExpires" class="input-field" placeholder="Days">
        </div>

        <div class="toggle-field">
          <span>Public:</span>
          <label class="switch">
            <input type="checkbox" id="accessPublic">
            <span class="slider"></span>
          </label>
        </div>

        <div class="toggle-field">
          <span>One-Time Use:</span>
          <label class="switch">
            <input type="checkbox" id="accessOneTimeUse">
            <span class="slider"></span>
          </label>
        </div>

        <label>TTL:</label>
        <input type="number" id="accessTTL" class="input-field" placeholder="TTL (in minutes)">

        <div class="toggle-field">
          <span>Enable TTL:</span>
          <label class="switch">
            <input type="checkbox" id="accessEnableTTL">
            <span class="slider"></span>
          </label>
        </div>

        <div class="button-container">
          <button class="submit-btn" id="createAccessBtn" onclick="handleCreateAccess()">Create</button>
          <button class="submit-btn hidden" id="updateAccessBtn" onclick="handleUpdateAccess()">Update</button>
          <button class="submit-btn hidden update-access-btn" id="viewAccessDetailsBtn" onclick="viewAccessDetails()">View Details</button>
        </div>
      </div>
    </div>

  </main>
  <script src="../assest/Scripts/file-sharing.js" defer></script>
</body>
</html>